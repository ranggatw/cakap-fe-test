<div class="mx-auto p-4 bg-[#F3F7FD] min-h-screen flex items-center justify-center">
  <div class="w-full max-w-4xl p-7 shadow-md bg-white rounded-xl">
    <h1 class="text-[#2B2F3C] font-bold text-xl mb-4">Create Child Student</h1>

    <!-- Form Start -->
    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="space-y-6">

        <!-- File Upload Section -->
      <div class="space-y-2">
        <label class="text-base font-light"><span class="text-red-600">*</span> Upload Photo:</label>
        <div>
          <div *ngIf="!isPreviewVisible">
            <label
              [ngClass]="{
                'border-red-500': !fileSelected && fileTouched,
                'border-gray-300': fileSelected || !fileTouched
              }"
              class="flex justify-center w-full h-32 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer focus:outline-none">
              <span class="flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24"
                     stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                </svg>
                <span class="font-medium text-gray-600">
                  To Attach you can,
                  <span class="text-blue-600 underline">browse</span>
                </span>
              </span>
              <input type="file" name="file_upload" class="hidden" (change)="onFileChange($event)">
            </label>
          </div>
          <div *ngIf="isPreviewVisible" class="flex max-w-sm border rounded-xl p-1 border-dashed relative">
            <img [src]="previewUrl" alt="Selected Photo" class="w-full max-h-[250px] h-auto rounded-md">
            <button type="button" (click)="removePreview()"
                    class="absolute mt-2 px-4 py-2 bg-red-500 text-white rounded-md top-0 right-0">
              <svg class="pointer-events-none fill-current w-4 h-4 ml-auto" xmlns="http://www.w3.org/2000/svg"
                   width="24" height="24" viewBox="0 0 24 24">
                <path class="pointer-events-none"
                      d="M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Form Fields Section -->
      <div class="flex flex-col md:flex-row md:space-x-6 space-y-6 md:space-y-0">
        <div class="md:w-1/3">
          <h1 class="font-light mb-1"><span class="text-red-600">*</span> Full Name:</h1>
          <input formControlName="fullName"
                 [ngClass]="{'border-red-500': studentForm.get('fullName')?.invalid && studentForm.get('fullName')?.touched, 'border-gray-300': !(studentForm.get('fullName')?.invalid && studentForm.get('fullName')?.touched)}"
                 class="w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                 placeholder="Input Full Name">
          <div *ngIf="studentForm.get('fullName')?.invalid && studentForm.get('fullName')?.touched"
               class="text-red-500 text-sm">
            Full Name is required.
          </div>
        </div>
        <div class="md:w-1/3">
          <h1 class="font-light mb-1"><span class="text-red-600">*</span> First Name:</h1>
          <input formControlName="firstName"
                 [ngClass]="{'border-red-500': studentForm.get('firstName')?.invalid && studentForm.get('firstName')?.touched, 'border-gray-300': !(studentForm.get('firstName')?.invalid && studentForm.get('firstName')?.touched)}"
                 class="w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                 placeholder="Input First Name">
          <div *ngIf="studentForm.get('firstName')?.invalid && studentForm.get('firstName')?.touched"
               class="text-red-500 text-sm">
            First Name is required.
          </div>
        </div>
        <div class="md:w-1/3">
          <h1 class="font-light mb-1"><span class="text-red-600">*</span> Last Name:</h1>
          <input formControlName="lastName"
                 [ngClass]="{'border-red-500': studentForm.get('lastName')?.invalid && studentForm.get('lastName')?.touched, 'border-gray-300': !(studentForm.get('lastName')?.invalid && studentForm.get('lastName')?.touched)}"
                 class="w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                 placeholder="Input Last Name">
          <div *ngIf="studentForm.get('lastName')?.invalid && studentForm.get('lastName')?.touched"
               class="text-red-500 text-sm">
            Last Name is required.
          </div>
        </div>
      </div>
      <div class="flex flex-col md:flex-row md:space-x-6 space-y-6 md:space-y-0">
        <div class="md:w-1/3">
          <h1 class="font-light mb-1"><span class="text-red-600">*</span> Birth Date:</h1>
          <input formControlName="birthdate"
                 [ngClass]="{'border-red-500': studentForm.get('birthdate')?.invalid && studentForm.get('birthdate')?.touched, 'border-gray-300': !(studentForm.get('birthdate')?.invalid && studentForm.get('birthdate')?.touched)}"
                 class="w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                 type="date">
          <div *ngIf="studentForm.get('birthdate')?.invalid && studentForm.get('birthdate')?.touched"
               class="text-red-500 text-sm">
            Birth Date is required.
          </div>
        </div>
        <div class="md:w-1/3">
          <h1 class="font-light mb-1"><span class="text-red-600">*</span> Gender:</h1>
          <select formControlName="gender"
                  [ngClass]="{'border-red-500': studentForm.get('gender')?.invalid && studentForm.get('gender')?.touched, 'border-gray-300': !(studentForm.get('gender')?.invalid && studentForm.get('gender')?.touched)}"
                  class="w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            <option value="">- Select Gender -</option>
            <option value="wanita">Wanita</option>
            <option value="pria">Pria</option>
          </select>
          <div *ngIf="studentForm.get('gender')?.invalid && studentForm.get('gender')?.touched"
               class="text-red-500 text-sm">
            Gender is required.
          </div>
        </div>
        <div class="md:w-1/3">
          <h1 class="font-light mb-1">School:</h1>
          <input formControlName="schoolName"
                 [ngClass]="{'outline:border-red': studentForm.get('schoolName')?.invalid &&
                 studentForm.get('schoolName')?.touched}"
                 class="w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                 placeholder="Input School">
        </div>
      </div>

      <!-- Submit Button Section -->
      <div class="flex justify-end">
        <button
          type="submit"
          [disabled]="isSubmitting"
          class="px-6 py-2 mt-4 text-white bg-blue-500 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
          <ng-container *ngIf="isSubmitting; else submitText">
            <div class="spinner-border"></div>
          </ng-container>
          <ng-template #submitText>Submit</ng-template>
        </button>
      </div>
    </form>
    <!-- Form End -->

  </div>
</div>
